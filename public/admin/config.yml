# Decap CMS Configuration for Jean-Marc Favre Blog
# This file defines the CMS structure, collections, and fields

# Backend configuration - using GitHub with OAuth
backend:
  name: github
  repo: weirdwool/jeanmarcfavre
  branch: main

# Media files configuration
media_folder: "public/blog/blog-images"  # Where uploaded images will be saved
public_folder: "/blog/blog-images"  # How images will be referenced in markdown

# Locale
locale: 'fr'

# Collections - define your content types
collections:
  - name: "blog"  # Used in routes, e.g., /admin/collections/blog
    label: "Blog Posts"  # Used in the UI
    folder: "src/content/blog"  # Where blog markdown files are stored
    create: true  # Allow users to create new posts
    slug: "{{year}}-{{month}}-{{day}}-{{slug}}"  # Filename template
    format: "frontmatter"
    sortable_fields: ['pubDate', 'title']  # Allow sorting by date or title
    sort: 'pubDate:desc'  # Default sort: most recent publication date first
    fields:  # The fields for each blog post
      
      - label: "Titre"
        name: "title"
        widget: "string"
        required: true
        hint: "Le titre de votre article"
      
      - label: "Date de publication"
        name: "pubDate"
        widget: "datetime"
        format: "YYYY-MM-DD"
        date_format: "DD/MM/YYYY"
        time_format: false
        required: true
        default: ""
      
      - label: "Lieu"
        name: "location"
        widget: "string"
        required: false
        hint: "Exemple: Annecy, Grand-Bornand, etc."
      
      - label: "Image principale"
        name: "main_image"
        widget: "image"
        required: true
        hint: "L'image qui apparaîtra sur la page blog et en haut de l'article"
        media_folder: "/public/blog/blog-images"
        public_folder: "/blog/blog-images"
      
      - label: "URL Galerie Lightroom"
        name: "gallery_url"
        widget: "string"
        required: false
        hint: "Exemple: /blog/blog-galeries/250323-Glisse-en-coeur/index.html"
        pattern: ['^(/blog/blog-galeries/.*|)$', "Doit commencer par /blog/blog-galeries/ ou être vide"]
      
      - label: "URL Vidéo Vimeo"
        name: "video_url"
        widget: "string"
        required: false
        hint: "Exemple: https://vimeo.com/123456789"
      
      - label: "Tags"
        name: "tags"
        widget: "object"
        collapsed: true
        fields:
          - {label: "Vidéo", name: "video", widget: "boolean", default: false}
          - {label: "Photo", name: "photo", widget: "boolean", default: false}
          - {label: "Drone", name: "drone", widget: "boolean", default: false}
          - {label: "Événementiel", name: "événementiel", widget: "boolean", default: false}
          - {label: "Studio", name: "studio", widget: "boolean", default: false}
          - {label: "Immobilier", name: "immobilier", widget: "boolean", default: false}
          - {label: "Industriel", name: "industriel", widget: "boolean", default: false}
          - {label: "Tourisme", name: "tourisme", widget: "boolean", default: false}
          - {label: "Voyage", name: "voyage", widget: "boolean", default: false}
          - {label: "Paysage", name: "paysage", widget: "boolean", default: false}
          - {label: "Sports", name: "sports", widget: "boolean", default: false}
          - {label: "Associatif", name: "associatif", widget: "boolean", default: false}
          - {label: "Divers", name: "divers", widget: "boolean", default: false}
          - {label: "Culture", name: "culture", widget: "boolean", default: false}
          - {label: "Gastronomie", name: "gastronomie", widget: "boolean", default: false}
          - {label: "Musique", name: "musique", widget: "boolean", default: false}
      
      - label: "Contenu"
        name: "body"
        widget: "markdown"
        required: true
        hint: "Le contenu principal de votre article"

