---
import Layout from "../layouts/Layout.astro";
import VimeoShowcaseGrid from "../components/VimeoShowcaseGrid.astro"; 
import ShowcaseVideo from '../components/ShowcaseVideo.astro';
---

<Layout 
  title="Vidéaste Professionnel Annecy | Production Vidéo - Jean-Marc Favre"
  description="Vidéaste et réalisateur professionnel à Annecy. Production vidéo entreprise, événements, documentaires, clips. 40 ans d'expérience audiovisuelle en Haute-Savoie."
  image="/images/parallax/180218-nazare-surf-725-1142x758.jpg"
  preloadImage="/images/parallax/180218-nazare-surf-725-1142x758.jpg"
  canonical="/video/"
>

   <section class="header-banner has-video-banner">
      <div class="header-banner-spacer">
         <div class="header-banner-content">
            <div class="side-border left"></div>
            <div class="side-border right"></div>
            <div class="top-border"></div>
            <div class="bottom-border"></div>
            <h1 class="text-shadow fade-in">VIDEO</h1>
         </div>
      </div>
      <div class="header-banner-video">
         <video class="index-hero-video" autoplay loop muted playsinline poster="/images/parallax/131024-besancon-1-1200x800.jpg">
            <source src="/videos/Woo-ShowReel.m4v" type="video/mp4">
            Your browser does not support the video tag.
         </video>
         <div class="header-banner-overlay"></div>
      </div>
      <div class="header-banner-video-image">
         <img src="/images/parallax/180218-nazare-surf-725-1142x758.jpg" alt="Vidéo - Jean-Marc Favre" />
         <div class="header-banner-overlay"></div>
      </div>
   </section>

   <div class="header-fixed-gradient"></div>

   <div class="container container-drone pt-4 pb-3">

      <section class="container-content prestations prestations-video">
         <div class="text-wrap pb-2">
            <h2>Production & Réalisation Vidéo en Auvergne-Rhône-Alpes</h2>
            <div class="text-wrapper">
               <p>La vidéo est aujourd’hui un outil incontournable pour captiver votre audience et affirmer votre présence en ligne.  </p>
               <p>Je propose des services de <strong>production vidéo</strong> créatives et percutantes , adaptées à vos objectifs de communication pour entreprises et particuliers. De la conception à la postproduction, chaque étape est prise en charge avec rigueur et sens artistique. Grâce à des solutions flexibles, mes prestations s’adaptent à tous les budgets sans compromis sur la qualité.</p>
            </div>
            <div class="separation-line-gradient"></div>
            <div class="text-wrapper">
               <h3 class="text-center">Prestations proposées :</h3>
               <ul style="columns: 2; gap: 2rem; list-style: disc inside;">
                  <li>Couverture d’événements (entreprises, festivals, touristiques)</li>
                  <li>Réalisation de tutoriels vidéo</li>
                  <li>Captation de spectacles ou conférences</li>
                  <li>Reportages institutionnels ou documentaires</li>
                  <li>Interviews & témoignages clients</li>
                  <li>Création de contenus pour les réseaux sociaux</li>
               </ul>
            </div>
            <p class="text-center">
               <b><a class="link-text" href="/contact">Contactez-moi</a> pour toute information supplémentaire ainsi que pour discuter de votre projet et obtenir un devis personnalisé ajusté au plus près.</b>
            </p>
         </div>
      </section>

      <section class="pt-1">
         <ShowcaseVideo />
      </section>

   </div>
   

   <section class="parallax-banner" style="background-image: url('/images/parallax/180727-Viaduc_Millau-049.jpg');">
   <div class="parallax-banner-overlay"></div> 
   <img 
      src="/images/parallax/180727-Viaduc_Millau-049.jpg" 
      alt="Chateau de Duingt" 
      class="parallax-mobile-img" 
      loading="lazy"
   >
   </section>


   <div class="container">

      <!-- Video Grid Feed to slider -->
      <section class="container-medium-slider">
         <div class="video-feed video-feed-grid">
            <div class="video-feed-header">
               <div class="title-wrapper link-flex">
                  <h2>Projets clients</h2>
                  <a class="link"
                     href="https://vimeo.com/showcase/11819723"
                     target="_blank"
                     rel="noopener noreferrer"
                     aria-label="Voir plus de projets clients">
                     Voir plus de projets clients
                  </a>
               </div> 
            </div>
            <VimeoShowcaseGrid showcaseId="11819723" />
         </div>
      </section>


      <section class="container-content">
         <div class="socials-video">
            <h3 class="text-center mb-2">ACCÉDEZ À MES CONTENUS VIDÉO</h3>
            <div class="socials-wrapper">
               <a href="https://vimeo.com/wooloomoolootv" target="_blank" aria-label="Vimeo">
               <img src="/images/icons/vimeo.svg" alt="Vimeo" class="icon" width="40" height="40">
               </a>
               <a href="https://www.youtube.com/channel/UCd_1Z_BMT7yLnsGuzrCtrkw" target="_blank" aria-label="YouTube">
               <img src="/images/icons/youtube.svg" alt="YouTube" class="icon" width="40" height="40">
               </a>
            </div>
         </div>
      </section>
   </div>
</Layout>

<script type="module">
  const showcaseId = '11819723'; // Vidéo Projets Clients
  const maxVideos = 9;

  async function fetchVimeoShowcaseVideos() {
    const loadingEl = document.getElementById('vimeo-video-grid-loading');
    const grid = document.getElementById('vimeo-video-grid');
    
    try {
      // Fetch from our secure server route instead of Vimeo directly
      const response = await fetch(`/api/vimeo?album=${showcaseId}&per_page=${maxVideos}`);


      if (!response.ok) {
        throw new Error(`API error: ${response.status}`);
      }

      const data = await response.json();
      loadingEl.style.display = 'none';
      grid.innerHTML = '';

      data.data.forEach(video => {
        const videoId = video.uri.split('/').pop();
        const title = video.name;
        const thumb = video.pictures.sizes.find(size => size.width >= 640)?.link || '';

        const container = document.createElement('div');
        container.className = 'vimeo-thumb-container';
        container.innerHTML = `
          <div class="vimeo-thumb" style="position:relative; cursor:pointer; overflow:hidden; border-radius:8px;">
            <img src="${thumb}" alt="${title}" style="width:100%; display:block; border-radius:8px;">
            <div class="vimeo-play-icon" style="position:absolute; top:50%; left:50%; transform:translate(-50%,-50%); width:60px; height:60px; background-color:rgba(0,0,0,0.6); border-radius:50%; display:flex; justify-content:center; align-items:center;">
              <svg viewBox="0 0 24 24" width="28" height="28" fill="white"><path d="M8 5v14l11-7z"/></svg>
            </div>
          </div>
        `;

        container.querySelector('.vimeo-thumb').addEventListener('click', () => {
          container.innerHTML = `
            <iframe 
              src="https://player.vimeo.com/video/${videoId}?autoplay=1&muted=0&playsinline=1"
              style="width:100%; aspect-ratio:16/9; border:none; border-radius:8px;"
              allow="autoplay; fullscreen"
              allowfullscreen
            ></iframe>
          `;
        });

        grid.appendChild(container);
      });
    } catch (error) {
      loadingEl.textContent = 'Erreur de chargement des vidéos';
    }
  }

  document.addEventListener('DOMContentLoaded', () => {
    fetchVimeoShowcaseVideos();

  });
</script>
